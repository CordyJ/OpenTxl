% Test of Unicode handling in patterns
#pragma -Dtokens

tokens
	% We need titles
	title	"%#n*"

	% Because of byte value conflicts, patterns  must be ordered from 32- to 16- to 8-bit in order for all to work properly.

	% UTF-32 characters are not auto-recognized by TXL, and must be hand-sequenced using parentheses
	utf_32	"[(тИА)(тИБ)(тИВ)(тИГ)(тИД)(тИЕ)(тИЖ)(тИЗ)(тИИ)(тИЙ)(тИК)(тИЛ)(тИМ)(тИН)(тИО)(тИП)]+"

	% UTF-16 characters are auto-recognized as byte sequences by TXL
	utf16_1	"[─А─Б─В─Г─Д─Е─Ж─З─И─Й─К─Л─М─Н─О─П─Р─С─Т─У─Ф─Х─Ц─Ч─Ш─Щ─Ъ─Ы─Ь─Э─Ю─Я─а─б─в─г─д─е─ж─з─и─й─к─л─м─н─о─п─░─▒─▓─│─┤─╡─╢─╖─╕─╣─║─╗─╝─╜─╛─┐┼А┼Б┼В┼Г┼Д┼Е┼Ж┼З┼И┼Й┼К┼Л┼М┼Н┼О┼П┼Р┼С┼Т┼У┼Ф┼Х┼Ц┼Ч┼Ш┼Щ┼Ъ┼Ы┼Ь┼Э┼Ю┼Я┼а┼б┼в┼г┼д┼е┼ж┼з┼и┼й┼к┼л┼м┼н┼о┼п┼░┼▒┼▓┼│┼┤┼╡┼╢┼╖┼╕┼╣┼║┼╗┼╝┼╜┼╛┼┐╞А╞Б╞В╞Г╞Д╞Е╞Ж╞З╞И╞Й╞К╞Л╞М╞Н╞О╞П╞Р╞С╞Т╞У╞Ф╞Х╞Ц╞Ч╞Ш╞Щ╞Ъ╞Ы╞Ь╞Э╞Ю╞Я╞а╞б╞в╞г╞д╞е╞ж╞з╞и╞й╞к╞л╞м╞н╞о╞п╞░╞▒╞▓╞│╞┤╞╡╞╢╞╖╞╕╞╣╞║╞╗╞╝╞╜╞╛╞┐╟А╟Б╟В╟Г╟Д╟Е╟Ж╟З╟И╟Й╟К╟Л╟М╟Н╟О╟П╟Р╟С╟Т╟У╟Ф╟Х╟Ц╟Ч╟Ш╟Щ╟Ъ╟Ы╟Ь╟Э╟Ю╟Я╟а╟б╟в╟г╟д╟е╟ж╟з╟и╟й╟к╟л╟м╟н╟о╟п╟░╟▒╟▓╟│╟┤╟╡╟╢╟╖╟╕╟╣╟║╟╗╟╝╟╜╟╛╟┐╚А╚Б╚В╚Г╚Д╚Е╚Ж╚З╚И╚Й╚К╚Л╚М╚Н╚О╚П╚Р╚С╚Т╚У╚Ф╚Х╚Ц╚Ч╚Ш╚Щ╚Ъ╚Ы╚Ь╚Э╚Ю╚Я╚а╚б╚в╚г╚д╚е╚ж╚з╚и╚й╚к╚л╚м╚н╚о╚п╚░╚▒╚▓╚│]+"

	utf16_2	"[╚┤╚╡╚╢╚╖╚╕╚╣╚║╚╗╚╝╚╜╚╛╚┐╔А╔Б╔В╔Г╔Д╔Е╔Ж╔З╔И╔Й╔К╔Л╔М╔Н╔О╔П╔Р╔С╔Т╔У╔Ф╔Х╔Ц╔Ч╔Ш╔Щ╔Ъ╔Ы╔Ь╔Э╔Ю╔Я╔а╔б╔в╔г╔д╔е╔ж╔з╔и╔й╔к╔л╔м╔н╔о╔п╔░╔▒╔▓╔│╔┤╔╡╔╢╔╖╔╕╔╣╔║╔╗╔╝╔╜╔╛╔┐╩А╩Б╩В╩Г╩Д╩Е╩Ж╩З╩И╩Й╩К╩Л╩М╩Н╩О╩П╩Р╩С╩Т╩У╩Ф╩Х╩Ц╩Ч╩Ш╩Щ╩Ъ╩Ы╩Ь╩Э╩Ю╩Я╩а╩б╩в╩г╩д╩е╩ж╩з╩и╩й╩к╩л╩м╩н╩о╩п╩░╩▒╩▓╩│╩┤╩╡╩╢╩╖╩╕╩╣╩║╩╗╩╝╩╜╩╛╩┐╦А╦Б╦В╦Г╦Д╦Е╦Ж╦З╦И╦Й╦К╦Л╦М╦Н╦О╦П╦Р╦С╦Т╦У╦Ф╦Х╦Ц╦Ч╦Ш╦Щ╦Ъ╦Ы╦Ь╦Э╦Ю╦Я╦а╦б╦в╦г╦д╦е╦ж╦з╦и╦й╦к╦л╦м╦н╦о╦п╦░╦▒╦▓╦│╦┤╦╡╦╢╦╖╦╕╦╣╦║╦╗╦╝╦╜╦╛╦┐ ╠А ╠Б ╠В ╠Г ╠Д ╠Е ╠Ж ╠З ╠И ╠Й ╠К ╠Л ╠М ╠Н ╠О ╠П ╠Р ╠С ╠Т ╠У ╠Ф ╠Х ╠Ц ╠Ч ╠Ш ╠Щ ╠Ъ ╠Ы ╠Ь ╠Э ╠Ю ╠Я ╠а ╠б ╠в ╠г ╠д ╠е ╠ж ╠з ╠и ╠й ╠к ╠л ╠м ╠н ╠о ╠п ╠░ ╠▒ ╠▓ ╠│ ╠┤ ╠╡ ╠╢ ╠╖ ╠╕ ╠╣ ╠║ ╠╗ ╠╝ ╠╜ ╠╛ ╠┐ ═А ═Б ═В ═Г ═Д ═Е ═Ж ═З ═И ═Й ═К ═Л ═М ═Н ═О ═П ═Р ═С ═Т ═У ═Ф ═Х ═Ц ═Ч ═Ш ═Щ ═Ъ ═Ы ═Ь ═Э ═Ю ═Я ═а ═б ═в ═г ═д ═е ═ж ═з ═и ═й ═к ═л ═м ═н ═о ═п═░═▒═▓═│═┤═╡═╢═╖═║═╗═╝═╜═╛═┐╬Д╬Е╬Ж╬З╬И╬Й╬К╬М╬О╬П╬Р╬С╬Т╬У╬Ф╬Х╬Ц╬Ч╬Ш╬Щ╬Ъ╬Ы╬Ь╬Э╬Ю╬Я╬а╬б╬г╬д╬е╬ж╬з╬и╬й╬к╬л╬м╬н╬о╬п╬░╬▒╬▓╬│╬┤╬╡╬╢╬╖╬╕╬╣╬║╬╗╬╝╬╜╬╛╬┐╧А╧Б╧В╧Г╧Д╧Е╧Ж╧З╧И╧Й╧К╧Л╧М╧Н╧О╧П╧Р╧С╧Т╧У╧Ф╧Х╧Ц╧Ч╧Ш╧Щ╧Ъ╧Ы╧Ь╧Э╧Ю╧Я╧а╧б╧в╧г╧д╧е╧ж╧з╧и╧й╧к╧л╧м╧н╧о╧п╧░╧▒╧▓╧│╧┤╧╡╧╢╧╖╧╕╧╣╧║╧╗╧╝╧╜╧╛╧┐╨А╨Б╨В╨Г╨Д╨Е╨Ж╨З╨И╨Й╨К╨Л╨М╨Н╨О╨П╨Р╨С╨Т╨У╨Ф╨Х╨Ц╨Ч╨Ш╨Щ╨Ъ╨Ы╨Ь╨Э╨Ю╨Я╨а╨б╨в╨г╨д╨е╨ж╨з╨и╨й╨к╨л╨м╨н╨о╨п╨░╨▒╨▓╨│╨┤╨╡╨╢╨╖╨╕╨╣╨║╨╗╨╝╨╜╨╛╨┐╤А╤Б╤В╤Г╤Д╤Е╤Ж╤З╤И╤Й╤К╤Л╤М╤Н╤О╤П╤Р╤С╤Т╤У╤Ф╤Х╤Ц╤Ч╤Ш╤Щ╤Ъ╤Ы╤Ь╤Э╤Ю╤Я╤а╤б╤в╤г╤д╤е╤ж╤з╤и╤й╤к╤л╤м╤н╤о╤п╤░╤▒╤▓╤│╤┤╤╡╤╢╤╖╤╕╤╣╤║╤╗╤╝╤╜╤╛╤┐╥А╥Б╥В ╥Г ╥Д ╥Е ╥Ж ╥З ╥И ╥Й╥К╥Л╥М╥Н╥О╥П╥Р╥С╥Т╥У╥Ф╥Х╥Ц╥Ч╥Ш╥Щ╥Ъ╥Ы╥Ь╥Э╥Ю╥Я╥а╥б╥в╥г╥д╥е╥ж╥з╥и╥й╥к╥л╥м╥н╥о╥п╥░╥▒╥▓╥│╥┤╥╡╥╢╥╖╥╕╥╣╥║╥╗╥╝╥╜╥╛╥┐╙А╙Б╙В╙Г╙Д╙Е╙Ж╙З╙И╙Й╙К╙Л╙М╙Н╙О╙П╙Р╙С╙Т╙У╙Ф╙Х╙Ц╙Ч╙Ш╙Щ╙Ъ╙Ы╙Ь╙Э╙Ю╙Я╙а╙б╙в╙г╙д╙е╙ж╙з╙и╙й╙к╙л╙м╙н╙о╙п╙░╙▒╙▓╙│╙┤╙╡╙╢╙╖╙╕╙╣╙║╙╗╙╝╙╜╙╛╙┐╘А╘Б╘В╘Г╘Д╘Е╘Ж╘З╘И╘Й╘К╘Л╘М╘Н╘О╘П╘Р╘С╘Т╘У╘Ф╘Х╘Ц╘Ч╘Ш╘Щ╘Ъ╘Ы╘Ь╘Э╘Ю╘Я╘а╘б╘в╘г╘д╘е╘ж╘з╘и╘й╘к╘л╘м╘н╘о╘п╘▒]+"

	utf16_3	"[╘▓╘│╘┤╘╡╘╢╘╖╘╕╘╣╘║╘╗╘╝╘╜╘╛╘┐╒А╒Б╒В╒Г╒Д╒Е╒Ж╒З╒И╒Й╒К╒Л╒М╒Н╒О╒П╒Р╒С╒Т╒У╒Ф╒Х╒Ц╒Щ╒Ъ╒Ы╒Ь╒Э╒Ю╒Я╒а╒б╒в╒г╒д╒е╒ж╒з╒и╒й╒к╒л╒м╒н╒о╒п╒░╒▒╒▓╒│╒┤╒╡╒╢╒╖╒╕╒╣╒║╒╗╒╝╒╜╒╛╒┐╓А╓Б╓В╓Г╓Д╓Е╓Ж╓З╓И╓Й╓К╓Н╓О╓П ╓С ╓Т ╓У ╓Ф ╓Х ╓Ц ╓Ч ╓Ш ╓Щ ╓Ъ ╓Ы ╓Ь ╓Э ╓Ю ╓Я ╓а ╓б ╓в ╓г ╓д ╓е ╓ж ╓з ╓и ╓й ╓к ╓л ╓м ╓н ╓о ╓п ╓░ ╓▒ ╓▓ ╓│ ╓┤ ╓╡ ╓╢ ╓╖ ╓╕ ╓╣ ╓║ ╓╗ ╓╝ ╓╜╓╛ ╓┐╫А ╫Б ╫В╫Г ╫Д ╫Е╫Ж ╫З╫Р╫С╫Т╫У╫Ф╫Х╫Ц╫Ч╫Ш╫Щ╫Ъ╫Ы╫Ь╫Э╫Ю╫Я╫а╫б╫в╫г╫д╫е╫ж╫з╫и╫й╫к╫п╫░╫▒╫▓╫│╫┤╪А╪Б╪В╪Г╪Д╪Е╪Ж╪З╪И╪Й╪К╪Л╪М╪Н╪О╪П ╪Р ╪С ╪Т ╪У ╪Ф ╪Х ╪Ц ╪Ч ╪Ш ╪Щ ╪Ъ╪Ы╪Ь╪Ю╪Я╪а╪б╪в╪г╪д╪е╪ж╪з╪и╪й╪к╪л╪м╪н╪о╪п╪░╪▒╪▓╪│╪┤╪╡╪╢╪╖╪╕╪╣╪║╪╗╪╝╪╜╪╛╪┐┘А┘Б┘В┘Г┘Д┘Е┘Ж┘З┘И┘Й┘К ┘Л ┘М ┘Н ┘О ┘П ┘Р ┘С ┘Т ┘У ┘Ф ┘Х ┘Ц ┘Ч ┘Ш ┘Щ ┘Ъ ┘Ы ┘Ь ┘Э ┘Ю ┘Я┘а┘б┘в┘г┘д┘е┘ж┘з┘и┘й┘к┘л┘м┘н┘о┘п ┘░┘▒┘▓┘│┘┤┘╡┘╢┘╖┘╕┘╣┘║┘╗┘╝┘╜┘╛┘┐┌А┌Б┌В┌Г┌Д┌Е┌Ж┌З┌И┌Й┌К┌Л┌М┌Н┌О┌П┌Р┌С┌Т┌У┌Ф┌Х┌Ц┌Ч┌Ш┌Щ┌Ъ┌Ы┌Ь┌Э┌Ю┌Я┌а┌б┌в┌г┌д┌е┌ж┌з┌и┌й┌к┌л┌м┌н┌о┌п┌░┌▒┌▓┌│┌┤┌╡┌╢┌╖┌╕┌╣┌║┌╗┌╝┌╜┌╛┌┐█А█Б█В█Г█Д█Е█Ж█З█И█Й█К█Л█М█Н█О█П█Р█С█Т█У█Ф█Х █Ц █Ч █Ш █Щ █Ъ █Ы █Ь█Э█Ю █Я █а █б █в █г █д█е█ж █з █и█й █к █л █м █н█о█п█░█▒█▓█│█┤█╡█╢█╖█╕█╣█║█╗█╝█╜█╛█┐▄А▄Б▄В▄Г▄Д▄Е▄Ж▄З▄И▄Й▄К▄Л▄М▄Н▄П▄Р ▄С▄Т▄У▄Ф▄Х▄Ц▄Ч▄Ш▄Щ▄Ъ▄Ы▄Ь▄Э▄Ю▄Я▄а▄б▄в▄г▄д▄е▄ж▄з▄и▄й▄к▄л▄м▄н▄о▄п ▄░ ▄▒ ▄▓ ▄│ ▄┤ ▄╡ ▄╢ ▄╖ ▄╕ ▄╣ ▄║ ▄╗ ▄╝ ▄╜ ▄╛ ▄┐ ▌А ▌Б ▌В ▌Г ▌Д ▌Е ▌Ж ▌З ▌И ▌Й ▌К▌Н▌О▌П▌Р▌С▌Т▌У▌Ф▌Х▌Ц▌Ч▌Ш▌Щ▌Ъ▌Ы▌Ь▌Э▌Ю▌Я▌а▌б▌в▌г▌д▌е▌ж▌з▌и▌й▌к▌л▌м▌н▌о▌п▌░▌▒▌▓▌│▌┤▌╡▌╢▌╖▌╕▌╣▌║▌╗▌╝▌╜▌╛▌┐▐А▐Б▐В▐Г▐Д▐Е▐Ж▐З▐И▐Й▐К▐Л▐М▐Н▐О▐П▐Р▐С▐Т▐У▐Ф▐Х▐Ц▐Ч▐Ш▐Щ▐Ъ▐Ы▐Ь▐Э▐Ю▐Я▐а▐б▐в▐г▐д▐е ▐ж ▐з ▐и ▐й ▐к ▐л ▐м ▐н ▐о ▐п ▐░▐▒▀А▀Б▀В▀Г▀Д▀Е▀Ж▀З▀И▀Й▀К▀Л▀М▀Н▀О▀П▀Р▀С▀Т▀У▀Ф▀Х▀Ц▀Ч▀Ш▀Щ▀Ъ▀Ы▀Ь▀Э▀Ю▀Я▀а▀б▀в▀г▀д▀е▀ж▀з▀и▀й▀к ▀л ▀м ▀н ▀о ▀п ▀░ ▀▒ ▀▓ ▀│▀┤▀╡▀╢▀╖▀╕▀╣▀║ ▀╜▀╛▀┐раАраБраВраГраДраЕраЖраЗраИраЙраКраЛраМраНраОраПраРраСраТраУраФраХ раЦ раЧ раШ раЩраЪ раЫ раЬ раЭ раЮ раЯ раа раб рав раград рае раж разраи рай рак рал рам ранра░ра▒ра▓ра│ра┤ра╡ра╢ра╖ра╕ра╣ра║ра╗ра╝ра╜ра╛рбАрбБрбВрбГрбДрбЕрбЖрбЗрбИрбЙрбКрбЛрбМрбНрбОрбПрбРрбСрбТрбУрбФрбХрбЦрбЧрбШ рбЩ рбЪ рбЫрбЮрбарббрбврбгрбдрбербжрбзрбирбйрбкрварвбрвврвгрвдрвервжрвзрвирвйрвкрвлрвмрвнрворвпрв░рв▒рв▓рв│рв┤рв╢рв╖рв╕рв╣рв║рв╗рв╝рв╜рв╛рв┐ргАргБргВргГргДргЕргЖргЗ ргУ ргФ ргХ ргЦргЧ ргШ ргЩ ргЪ ргЫ ргЬ ргЭ ргЮ ргЯ рга ргбргв ргг ргд рге ргж ргз рги ргй ргк ргл ргм ргн рго ргп рг░ рг▒ рг▓ рг│ рг┤ рг╡ рг╢ рг╖ рг╕ рг╣ рг║ рг╗ рг╝ рг╜ рг╛ рг┐]+"

	% 8-bit Extended ASCII Latin-1 characters are auto-recognized by TXL
	latin1	"[\a\d\s\[\]\(\)тВмтАЪ╞ТтАЮтАжтАатАб╦ЖтА░┼атА╣┼Т┼╜тАШтАЩтАЬтАЭтАвтАУтАФ╦ЬтДв┼бтА║┼У┼╛┼╕┬б┬в┬г┬д┬е┬ж┬з┬и┬й┬к┬л┬м┬о┬п┬░┬▒┬▓┬│┬┤┬╡┬╢┬╖┬╕┬╣┬║┬╗┬╝┬╜┬╛┬┐├А├Б├В├Г├Д├Е├Ж├З├И├Й├К├Л├М├Н├О├П├Р├С├Т├У├Ф├Х├Ц├Ч├Ш├Щ├Ъ├Ы├Ь├Э├Ю├Я├а├б├в├г├д├е├ж├з├и├й├к├л├м├н├о├п├░├▒├▓├│├┤├╡├╢├╖├╕├╣├║├╗├╝├╜├╛├┐ЁЭЫБтДа]+"

	% These are ASCII, but should have been caught by latin1
	BUG "[!\"\#$%&'\(\)\*\+,-./0123456789:;<=>\?@ABCDEFGHIJKLMNOPQRSTUVWXYZ\[\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~]+"
end tokens

define program
	[repeat tokenNL]
end define

define tokenNL
	[token] [NL]
end define

function main 
	match [program] _ [program]
end function

